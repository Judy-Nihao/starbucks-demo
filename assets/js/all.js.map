{"version":3,"sources":["all.js"],"names":["circle","document","querySelector","landingProductBigImg","landingProductBigText","thumbItems","querySelectorAll","forEach","item","addEventListener","e","src","currentTarget","childNodes","textContent","dataset","name","style","backgroundColor","color","cartBtn","closeBtn","shopingCard","shopingCardContent","quantity","total","productWrapper","sendBtn","message","classList","add","body","overflow","remove","products","id","image","price","shoppingList","showProduct","index","str","innerHTML","addToCartBtn","addToCart","JSON","parse","stringify","console","log","reloadShoppingCard","count","totalPrice","toLocaleString","changeQuantity","quantityChanged","splice","localStorage","clear"],"mappings":"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","file":"all.js","sourcesContent":["// index 區塊\nconst circle = document.querySelector(\".circle\")\nconst landingProductBigImg = document.querySelector(\".landing__product__big img\");\nconst landingProductBigText = document.querySelector(\".landing__product__big p\");\nconst thumbItems = document.querySelectorAll(\".thumb__item\");\n\nthumbItems.forEach(function(item){\n  // item.childNodes[0] 是 thumb__item 裡面的 img 元素\n \n\n  item.addEventListener(\"click\", function(e){\n    //縮圖被點擊到，就用縮圖src替換掉大圖src\n    //縮圖被點擊到，就用縮圖data-name的值，替換掉 p 的內容\n    landingProductBigImg.src = e.currentTarget.childNodes[0].src;\n    landingProductBigText.textContent = e.currentTarget.dataset.name;\n    \n    circle.style.backgroundColor = e.currentTarget.dataset.color;\n  })\n})\n\n\n// menu 區塊\nconst cartBtn = document.querySelector(\".cart\");\nconst closeBtn = document.querySelector(\".close\");\nconst shopingCard = document.querySelector(\".shopingCard\");\nconst shopingCardContent = document.querySelector(\".shopingCard__list__content\");\nconst quantity = document.querySelector(\".quantity\");\nconst total = document.querySelector(\".checkout__total\");\nconst productWrapper = document.querySelector(\".menu__content__list__wrapper\");\nconst sendBtn = document.querySelector(\".checkout__send\");\nconst message = document.querySelector(\".send__message\");\n\n\n\ncartBtn.addEventListener(\"click\", function(){\n  shopingCard.classList.add(\"active\");\n  document.body.style.overflow=\"hidden\";\n})\n\n\ncloseBtn.addEventListener(\"click\", function(){\n  shopingCard.classList.remove(\"active\");\n  message.classList.remove(\"active\");\n  document.body.style.overflow=\"auto\";\n  sendBtn.style.backgroundColor = \"#323232\";\n})\n\nconst products = [\n  {\n    id: 1,\n    name: \"桃子晶凍星冰樂\",\n    image: \"flappuccino01.png\",\n    price: 155\n  },\n  {\n    id: 2,\n    name: \"抹茶可可星冰樂\",\n    image: \"flappuccino02.png\",\n    price: 150\n  },\n  {\n    id: 3,\n    name: \"芒果乳酪星冰樂\",\n    image: \"flappuccino03.png\",\n    price: 160\n  },\n  {\n    id: 4,\n    name: \"醇濃抹茶星冰樂\",\n    image: \"flappuccino04.png\",\n    price: 140\n  },\n  {\n    id: 5,\n    name: \"焦糖咖凍星冰樂\",\n    image: \"flappuccino05.png\",\n    price: 125\n  },\n  {\n    id: 6,\n    name: \"乳香野莓星冰樂\",\n    image: \"flappuccino06.png\",\n    price: 125\n  },\n  {\n    id: 7,\n    name: \"草莓乳酪星冰樂\",\n    image: \"flappuccino07.png\",\n    price: 155\n  },\n  {\n    id: 8,\n    name: \"摩卡焦糖星冰樂\",\n    image: \"flappuccino08.png\",\n    price: 130\n  },\n  {\n    id: 9,\n    name: \"綿滑甜薯星冰樂\",\n    image: \"flappuccino09.png\",\n    price: 130\n  },\n]\n\n\nlet shoppingList = [];\n\n\n\nfunction showProduct(){\n  products.forEach(function(item, index){\n      \n       let str = `\n      <div class=\"menu__content__list__card\">\n          <div class=\"card__img\"><img src=\"assets/images/${item.image}\" alt=\"星冰樂照片\"></div>\n          <h2>${item.name}</h2>\n          <p class=\"price\">NT$<span>${item.price}</span></p>\n          <button class=\"addToCart\" onclick=\"addToCart(${index})\"><i class='bx bx-plus-circle'></i>加入購物車</button>\n      </div>\n      `;\n\n      productWrapper.innerHTML += str;\n  })\n  const addToCartBtn = document.querySelectorAll(\".addToCart\");\n\n  addToCartBtn.forEach(function(item){\n    item.addEventListener(\"click\", function(){\n      message.classList.remove(\"active\");\n    })\n  })\n}\n\nshowProduct();\n\nfunction addToCart(index){\n  if(shoppingList[index] == null){\n    // 舉例：讓購物清單陣列索引值 8 的位置之物件，等同於產品列表陣列的索引值8\n    // 因為是索引 8 對 8 ，不是一般用push從頭把物件加入陣列的指定方式\n    // 如果去印出購物清單陣列，會出現： [empty × 8, {…}]，顯示長度為 9，因為只加入索引值8也就是第九個，所以前面會有8個空位\n    \n    // 先轉 JSON 再轉物件，進行深拷貝之後，斷開連結！才可以將這批「新的物件」塞給購物車清單陣列。\n    // 不這樣轉換的話，之後購物車清單有任何異動，都會影響到原始的 products 陣列，計算價格時會出問題。\n    // shoppingList[index] = products[index]; //舊的寫法會影響到原始陣列\n    \n    shoppingList[index] = JSON.parse(JSON.stringify(products[index]));\n    shoppingList[index].quantity = 1;\n    console.log(shoppingList[index]);\n    console.log(JSON.stringify(products[index]));\n    console.log(JSON.parse(JSON.stringify(products[index])));\n  }\n\n  reloadShoppingCard();\n\n};\n\n\n// 渲染購物車清單畫面\nfunction reloadShoppingCard(){\n  shopingCardContent.innerHTML = \"\";\n  let count = 0;\n  let totalPrice = 0;\n  \n  shoppingList.forEach(function(item, index){\n    totalPrice = totalPrice + item.price;\n    count = count + item.quantity;\n\n    if(item !== null){\n      let str = `\n      <li class=\"shopingCard__list__item\">\n        <div class=\"shopping__img\"><img src=\"assets/images/${item.image}\" alt=\"\"></div>\n        <div>\n          <p class=\"shopping__name\">${item.name}</p>\n          <p class=\"shopping__price\">NT$<span>${item.price}</span></p>\n        </div>\n        <div class=\"shopping__quantity\">\n            <button class=\"minus\" onclick=\"changeQuantity(${index},${item.quantity - 1})\"><i class='bx bx-minus' ></i></button>\n            <div class=\"count\">${item.quantity}</div>\n            <button class=\"plus\"  onclick=\"changeQuantity(${index},${item.quantity + 1})\"><i class='bx bx-plus'></i></button>\n        </div>\n      </li>\n      `;\n      shopingCardContent.innerHTML += str;\n     }\n\n  })\n  //購物清單底下的總價計算結果\n  total.textContent = totalPrice.toLocaleString();\n  //購物車icon上面的數量\n  quantity.textContent = count; \n  \n}\n\n// 參數 quantityChanged 在按下去購物車清單內的加減符號時，就會進行加減，並這個計算後的值帶進來函式內\n// 把這個最新的數量，賦值給「購物車清單」這個陣列內的，物件的 quantity 屬性。\n// 如果數量值被改變到等於0，就直接把這個對應索引值的物件，從購物清單陣列中刪除\n// 購物清單陣列中的物件「價錢」，用最新得到的數量值乘以原始產品清單的「單價」\n// 一有更動，就用最新的 購物車清單陣列的內容，重新渲染出來購物車清單畫面\n\nfunction changeQuantity(index, quantityChanged){\n    if(quantityChanged == 0){\n      shoppingList.splice(index,1);\n    }else{\n      shoppingList[index].quantity = quantityChanged;\n      shoppingList[index].price = quantityChanged * products[index].price;\n    }\n    reloadShoppingCard();\n}\n\n\n\n// 按下送出訂單就清空購物車陣列，並重新渲染購物車畫面\nsendBtn.addEventListener(\"click\", function(){\n    shoppingList = [];\n    reloadShoppingCard()\n    message.classList.add(\"active\");\n    sendBtn.style.backgroundColor = \"#007542\";\n    console.log(\"有按到click\");\n    localStorage.clear();\n})\n\n\n// function saveData(){\n//   localStorage.setItem(\"data\", JSON.stringify(shoppingList));\n// }\n\n// // 把存在瀏覽器內的資料，全部渲染到購物車內裡面\n// function showTask(){\n//   shoppingList = JSON.parse(localStorage.getItem(\"data\"));\n//   if(shoppingList !== null){\n//     reloadShoppingCard();\n//   }\n// }\n\n\n\n// showTask();\n\n\n\n// function saveQ(){\n//   localStorage.setItem(\"quantity\", quantity.textContent);\n// }\n\n// // 把存在瀏覽器內的資料，全部渲染到購物車內裡面\n// function showQ(){\n//   quantity.textContent =  localStorage.getItem(\"quantity\");\n// }\n\n// showQ();\n\n"]}